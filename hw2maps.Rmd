---
title: "HW2_maps"
author: "yhui"
date: "10/3/2019"
output: html_document
---

```{r setup, include=FALSE}
require(rgdal)
require(leaflet)
require(leaflet.extras)

require(dplyr)
require(readxl)
require(stringr)
```

# Getting Spatial Data to draw polygons on world map

```{r, loading}
cds.load <- readOGR("./cb_2015_us_cd114_500k/cb_2015_us_cd114_500k.shp", layer = "cb_2015_us_cd114_500k", GDAL1_integer64_policy = TRUE)
plot(cds.load)

```

# Merging Table Data to my shapefile

```{r, merging}
op_data<- read_excel("Geographies_of_Opportunity_Ranking_Well_Being_by_Congressional_District_(114th_Congress).xlsx") %>%
  mutate(Number = str_pad(Number, 4, pad = "0"))
op_white<-op_data[op_data$`White (%)`>50,]
op_nonwhite<-op_data[op_data$`White (%)`<=50,]
# Create 2 data tables with different portions of White #Population
cds1 <- cds.load[cds.load$GEOID  %in% op_white$Number,]
cds2 <- cds.load[cds.load$GEOID  %in% op_nonwhite$Number,]
cds1@data <- merge(cds1@data, op_white, sort = FALSE, by.x = "GEOID", by.y = "Number")
cds2@data <- merge(cds2@data, op_nonwhite, sort = FALSE, by.x = "GEOID", by.y = "Number")
```
